<?xml version="1.0" encoding="utf-8"?>
<com.google.android.material.card.MaterialCardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="16dp"
    app:cardCornerRadius="16dp"
    app:cardElevation="0dp"
    app:strokeWidth="0dp"
    app:cardBackgroundColor="@color/card_bg">

    <!-- ===== KORREKTUR 1: `minHeight` wird entfernt ===== -->
    <androidx.constraintlayout.widget.ConstraintLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <ImageView
            android:id="@+id/image_route"
            android:layout_width="0dp"
            android:layout_height="150dp"
            android:scaleType="centerCrop"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent"
            tools:srcCompat="@drawable/rec_tours_testimg" />

        <!-- Die Chips und der Titel bleiben unverändert -->
        <com.google.android.material.chip.Chip
            android:id="@+id/chip_sustainability"
            android:layout_width="32dp"
            android:layout_height="36dp"
            android:layout_marginTop="5dp"
            android:layout_marginEnd="12dp"
            android:clickable="false"
            android:focusable="false"
            android:text=""
            app:chipBackgroundColor="@color/primary"
            app:chipIcon="@drawable/ic_leaf"
            app:chipIconSize="18dp"
            app:chipStartPadding="6dp"
            app:chipEndPadding="6dp"
            app:chipStrokeWidth="0dp"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintTop_toTopOf="parent"
            app:shapeAppearanceOverlay="@style/ShapeAppearance.App.Chip.Pill"
            tools:visibility="visible" />

        <com.google.android.material.chip.Chip
            android:id="@+id/chip_distance"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="0dp"
            android:layout_marginStart="12dp"
            android:clickable="false"
            android:focusable="false"
            android:textColor="@color/text_black"
            app:chipBackgroundColor="@color/primary"
            app:chipStrokeWidth="0dp"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent"
            app:shapeAppearanceOverlay="@style/ShapeAppearance.App.Chip.Pill"
            android:textAppearance="@style/TextAppearance.Material3.LabelMedium"
            app:chipMinHeight="24dp"
            tools:text="4 KM" />

        <com.google.android.material.chip.Chip
            android:id="@+id/chip_category"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="-12dp"
            android:clickable="false"
            android:focusable="false"
            android:textColor="@color/text_black"
            app:chipBackgroundColor="@color/primary"
            app:layout_constraintStart_toStartOf="@+id/chip_distance"
            app:layout_constraintTop_toBottomOf="@+id/chip_distance"
            app:shapeAppearanceOverlay="@style/ShapeAppearance.App.Chip.Pill"
            android:textAppearance="@style/TextAppearance.Material3.LabelMedium"
            app:chipMinHeight="24dp"
            tools:text="Kategorie" />

        <TextView
            android:id="@+id/text_route_title"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginStart="16dp"
            android:layout_marginTop="16dp"
            android:layout_marginEnd="16dp"
            android:textAppearance="@style/TextAppearance.Material3.TitleMedium"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toBottomOf="@+id/image_route"
            tools:text="Ein Tag in Osnabrück mit sehr, sehr, sehr langem Titel" />


        <!-- ===== KORREKTUR 2: Beschreibung mit flexiblem Platz nach unten ===== -->
        <TextView
            android:id="@+id/text_route_description"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="4dp"
            android:layout_marginBottom="16dp"
            android:textAppearance="@style/TextAppearance.Material3.BodyMedium"
            android:textColor="?android:attr/textColorSecondary"
            app:layout_constrainedHeight="true"
            app:layout_constraintBottom_toTopOf="@+id/button_view_route"
            app:layout_constraintEnd_toEndOf="@+id/text_route_title"
            app:layout_constraintStart_toStartOf="@+id/text_route_title"
            app:layout_constraintTop_toBottomOf="@+id/text_route_title"
            app:layout_constraintVertical_bias="0.0"
            tools:text="Frühstück, Aktivitäten und Abendessen und noch mehr Text, um die Zeile umbrechen zu lassen. Dieser Text kann jetzt sehr lang sein und wird den verfügbaren Platz nutzen, ohne den Button zu verschieben." />

        <!-- Button (ganz unten) bleibt unverändert -->
        <com.google.android.material.button.MaterialButton
            android:id="@+id/button_view_route"
            app:shapeAppearanceOverlay="@style/ShapeAppearance.App.Button.Pill"
            style="@style/Widget.Material3.Button.OutlinedButton"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginStart="16dp"
            android:layout_marginEnd="16dp"
            android:layout_marginBottom="16dp"
            android:text="Route ansehen"
            android:textColor="@color/primary"
            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:rippleColor="@color/primary_inactive"
            app:strokeColor="@color/primary"/>

    </androidx.constraintlayout.widget.ConstraintLayout>
</com.google.android.material.card.MaterialCardView>

